(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{470:function(t,e,n){"use strict";n.r(e);var o=n(2),a=Object(o.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"hooksåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooksåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢"}},[t._v("#")]),t._v(" hooksåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢")]),t._v(" "),e("p",[t._v("é’©å­ç¼–ç¨‹ï¼ˆhooking) æ˜¯è®¡ç®—æœºç¨‹åºè®¾è®¡æœ¯è¯­, é€šè¿‡æ‹¦æˆªè½¯ä»¶æ¨¡å—é—´çš„å‡½æ•°è°ƒç”¨ã€æ¶ˆæ¯ä¼ é€’ã€äº‹ä»¶ä¼ é€’æ¥ä¿®æ”¹æˆ–æ‰©å±•æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºæˆ–å…¶ä»–è½¯ä»¶ç»„ä»¶çš„è¡Œä¸ºçš„å„ç§æŠ€æœ¯ã€‚å¤„ç†è¢«æ‹¦æˆªçš„å‡½æ•°è°ƒç”¨ã€äº‹ä»¶ã€æ¶ˆæ¯çš„ä»£ç ï¼Œè¢«ç§°ä¸ºé’©å­ï¼ˆhookï¼‰ã€‚")]),t._v(" "),e("p",[t._v("ç®€å•ç†è§£ä¸ºï¼šåœ¨ç‰¹å®šçš„æ—¶æœºï¼Œæ‰§è¡Œçš„å›è°ƒ")]),t._v(" "),e("h2",{attrs:{id:"react-hooks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks"}},[t._v("#")]),t._v(" React Hooks")]),t._v(" "),e("p",[t._v("1.åªèƒ½åœ¨Reactçš„"),e("strong",[t._v("å‡½æ•°ç»„ä»¶FC")]),t._v("ä¸­ä½¿ç”¨")]),t._v(" "),e("p",[t._v("2.åªèƒ½åœ¨"),e("strong",[t._v("å‡½æ•°æœ€å¤–å±‚")]),t._v("è°ƒç”¨")]),t._v(" "),e("h2",{attrs:{id:"usestate-initialstate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usestate-initialstate"}},[t._v("#")]),t._v(" useState(initialState)")]),t._v(" "),e("p",[t._v("stateæ¦‚å¿µå‚è€ƒ: "),e("RouterLink",{attrs:{to:"/front/react/core.html"}},[t._v("core")])],1),t._v(" "),e("p",[t._v("(1). State Hookè®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰stateçŠ¶æ€, å¹¶è¿›è¡ŒçŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œ")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("æ³¨æ„äº‹é¡¹\n1.useState æ˜¯ä¸€ä¸ª Hookï¼Œå› æ­¤ä½ åªèƒ½åœ¨ ç»„ä»¶çš„é¡¶å±‚ æˆ–è‡ªå·±çš„ Hook ä¸­è°ƒç”¨å®ƒã€‚\nä½ ä¸èƒ½åœ¨å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœä½ éœ€è¦è¿™æ ·åšï¼Œè¯·æå–ä¸€ä¸ªæ–°ç»„ä»¶å¹¶å°†çŠ¶æ€ç§»å…¥å…¶ä¸­ã€‚\n\n2.åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼ŒReact å°† ä¸¤æ¬¡è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ï¼Œä»¥ å¸®ä½ æ‰¾åˆ°æ„å¤–çš„ä¸çº¯æ€§ã€‚è¿™åªæ˜¯å¼€å‘æ—¶çš„è¡Œä¸ºï¼Œä¸å½±å“ç”Ÿäº§ã€‚\nå¦‚æœä½ çš„åˆå§‹åŒ–å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼ˆæœ¬è¯¥æ˜¯è¿™æ ·ï¼‰ï¼Œå°±ä¸åº”å½±å“è¯¥è¡Œä¸ºã€‚å…¶ä¸­ä¸€ä¸ªè°ƒç”¨çš„ç»“æœå°†è¢«å¿½ç•¥ã€‚\n")])])]),e("p",[t._v("(2). è¯­æ³•:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("    const [xxx, setXxx] = React.useState(initialState)\n    const [xxx, setXxx] = useState<dataType>(initialState) //ts\n    ä½¿ç”¨ æ•°ç»„è§£æ„ æ¥å‘½åçŠ¶æ€å˜é‡ï¼Œä¾‹å¦‚ [something, setSomething]ã€‚\n\n    å‚æ•°:\n    initialState åˆå§‹åŒ–çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä½†å¯¹äºå‡½æ•°æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚åœ¨åˆå§‹æ¸²æŸ“åï¼Œæ­¤å‚æ•°å°†è¢«å¿½ç•¥ã€‚\n\n    ---\n    å¦‚æ˜¯å‡½æ•°ï¼Œåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œä¸è¯¥æ¥æ”¶ä»»æ„å‚æ•°ï¼Œå¹¶ä¸”åº”è¯¥è¿”å›ä¸€ä¸ªæŒ‡\n    const [todos, setTodos] = useState(createInitialTodos);\n    æ³¨æ„ï¼šä¸è¦è°ƒç”¨å‡½æ•°\n    ä»ç„¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è°ƒç”¨æ­¤å‡½æ•°ã€‚å¦‚æœå®ƒåˆ›å»ºå¤§æ•°ç»„æˆ–æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ï¼Œè¿™å¯èƒ½ä¼šæµªè´¹èµ„æºã€‚\n    const [todos, setTodos] = useState(createInitialTodos());\n    ---\n\n    è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªç”±ä¸¤ä¸ªå€¼ç»„æˆçš„æ•°ç»„\n    1.å½“å‰çš„ stateã€‚åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œå®ƒå°†ä¸ä½ ä¼ é€’çš„ initialState ç›¸åŒ¹é…ã€‚\n    2.set å‡½æ•°ï¼Œå®ƒå¯ä»¥è®©ä½ å°† state æ›´æ–°ä¸ºä¸åŒçš„å€¼å¹¶è§¦å‘é‡æ–°æ¸²æŸ“ã€‚\n\n    setXxx()2ç§å†™æ³•:\n\n    //æ–°å€¼ä¸ä¾èµ–æ—§å€¼è®¡ç®—\nÂ  Â  setXxx(newValue): å‚æ•°ä¸ºéå‡½æ•°å€¼, ç›´æ¥æŒ‡å®šæ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼\n    //æ–°å€¼ä¾èµ–æ—§å€¼è®¡ç®—\nÂ  Â  setXxx(preState => newValue): å‚æ•°ä¸ºå‡½æ•°, æ¥æ”¶preState, è¿”å›æ–°çš„state, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼\n\n    setState\n    æ ¹æ®å…ˆå‰çš„ state æ›´æ–° state \n    å‡è®¾ age ä¸º 42ï¼Œè¿™ä¸ªå¤„ç†å‡½æ•°ä¸‰æ¬¡è°ƒç”¨ setAge(age + 1)ï¼š\n    function handleClick() {\n      setAge(age + 1); // setAge(42 + 1)\n      setAge(age + 1); // setAge(42 + 1)\n      setAge(age + 1); // setAge(42 + 1)\n    }\n    ç„¶è€Œï¼Œç‚¹å‡»ä¸€æ¬¡åï¼Œage å°†åªä¼šå˜ä¸º 43 è€Œä¸æ˜¯ 45ï¼\n    è¿™æ˜¯å› ä¸ºè°ƒç”¨ set å‡½æ•° ä¸ä¼šæ›´æ–° å·²ç»è¿è¡Œä»£ç ä¸­çš„ age çŠ¶æ€å˜é‡ã€‚å› æ­¤ï¼Œæ¯ä¸ª setAge(age + 1) è°ƒç”¨å˜æˆäº† setAge(43)ã€‚\n\n    ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥å‘ setAge ä¼ é€’ä¸€ä¸ª æ›´æ–°å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼š\n    function handleClick() {\n      setAge(a => a + 1); // setAge(42 => 43)\n      setAge(a => a + 1); // setAge(43 => 44)\n      setAge(a => a + 1); // setAge(44 => 45)\n    }\n\n    æ³¨æ„äº‹é¡¹\n    1.set å‡½æ•° ä»…æ›´æ–° ä¸‹ä¸€æ¬¡ æ¸²æŸ“çš„çŠ¶æ€å˜é‡ã€‚å¦‚æœåœ¨è°ƒç”¨ set å‡½æ•°åè¯»å–çŠ¶æ€å˜é‡ï¼Œåˆ™ ä»ä¼šå¾—åˆ°åœ¨è°ƒç”¨ä¹‹å‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ—§å€¼ã€‚\n    2.React ä¼š æ‰¹é‡å¤„ç†çŠ¶æ€æ›´æ–°ã€‚å®ƒä¼šåœ¨æ‰€æœ‰ äº‹ä»¶å¤„ç†å‡½æ•°è¿è¡Œ å¹¶è°ƒç”¨å…¶ set å‡½æ•°åæ›´æ–°å±å¹•ã€‚è¿™å¯ä»¥é˜²æ­¢åœ¨å•ä¸ªäº‹ä»¶æœŸé—´å¤šæ¬¡é‡æ–°æ¸²æŸ“ã€‚åœ¨æŸäº›ç½•è§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦å¼ºåˆ¶ React æ›´æ—©åœ°æ›´æ–°å±å¹•ï¼Œä¾‹å¦‚è®¿é—® DOMï¼Œä½ å¯ä»¥ä½¿ç”¨ flushSyncã€‚\n\n    å­˜å‚¨å‰ä¸€æ¬¡æ¸²æŸ“çš„ä¿¡æ¯\n\n    ç„¶è€Œï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨å“åº”æ¸²æŸ“æ—¶è°ƒæ•´çŠ¶æ€â€”â€”ä¾‹å¦‚ï¼Œå½“ props æ”¹å˜æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›æ”¹å˜çŠ¶æ€å˜é‡(åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦è¿™æ ·åš)ã€‚\n\n    å¦‚æœä½ éœ€è¦çš„å€¼å¯ä»¥å®Œå…¨ä»å½“å‰ props æˆ–å…¶ä»– state ä¸­è®¡ç®—å‡ºæ¥ï¼Œé‚£ä¹ˆ å®Œå…¨å¯ä»¥ç§»é™¤é‚£äº›å¤šä½™çš„çŠ¶æ€ã€‚å¦‚æœä½ æ‹…å¿ƒé‡æ–°è®¡ç®—çš„é¢‘ç‡è¿‡é«˜ï¼Œå¯ä»¥ä½¿ç”¨ useMemo Hook æ¥å¸®åŠ©ä¼˜åŒ–ã€‚\n    å¦‚æœä½ æƒ³é‡ç½®æ•´ä¸ªç»„ä»¶æ ‘çš„çŠ¶æ€ï¼Œå¯ä»¥å‘ç»„ä»¶ä¼ é€’ä¸€ä¸ªä¸åŒçš„ keyã€‚\n    å¦‚æœå¯ä»¥çš„è¯ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ›´æ–°æ‰€æœ‰ç›¸å…³çŠ¶æ€ã€‚\n\n\n    æ˜¯å¦æ€»æ˜¯ä¼˜å…ˆä½¿ç”¨æ›´æ–°å‡½æ•°\n    åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ç§æ–¹æ³•æ²¡æœ‰åŒºåˆ«ã€‚React å§‹ç»ˆç¡®ä¿å¯¹äºæœ‰æ„çš„ç”¨æˆ·æ“ä½œï¼Œå¦‚å•å‡»ï¼Œage çŠ¶æ€å˜é‡å°†åœ¨ä¸‹ä¸€æ¬¡å•å‡»ä¹‹å‰è¢«æ›´æ–°ã€‚è¿™æ„å‘³ç€å•å‡»äº‹ä»¶å¤„ç†å‡½æ•°åœ¨äº‹ä»¶å¤„ç†å¼€å§‹æ²¡æœ‰å¾—åˆ°â€œè¿‡æ—¶â€ age çš„é£é™©ã€‚\n\n    ä½†æ˜¯ï¼Œå¦‚æœåœ¨åŒä¸€äº‹ä»¶ä¸­è¿›è¡Œå¤šä¸ªæ›´æ–°ï¼Œåˆ™æ›´æ–°å‡½æ•°å¯èƒ½ä¼šæœ‰å¸®åŠ©ã€‚å¦‚æœè®¿é—®çŠ¶æ€å˜é‡æœ¬èº«ä¸æ–¹ä¾¿ï¼ˆåœ¨ä¼˜åŒ–é‡æ–°æ¸²æŸ“æ—¶å¯èƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼‰ï¼Œå®ƒä»¬ä¹Ÿå¾ˆæœ‰ç”¨ã€‚\n\n    å¦‚æœæ¯”èµ·è½»å¾®çš„å†—ä½™ä½ æ›´å–œæ¬¢è¯­æ³•çš„ä¸€è‡´æ€§ï¼Œä½ æ­£è®¾ç½®çš„çŠ¶æ€åˆæ˜¯æ ¹æ®å…ˆå‰çš„çŠ¶æ€è®¡ç®—å‡ºæ¥çš„ï¼Œé‚£ä¹ˆæ€»æ˜¯ç¼–å†™ä¸€ä¸ªæ›´æ–°å‡½æ•°æ˜¯åˆç†çš„ã€‚å¦‚æœå®ƒæ˜¯ä»æŸä¸ªå…¶ä»–çŠ¶æ€å˜é‡çš„å…ˆå‰çŠ¶æ€è®¡ç®—å‡ºçš„ï¼Œåˆ™ä½ å¯èƒ½å¸Œæœ›å°†å®ƒä»¬ç»“åˆæˆä¸€ä¸ªå¯¹è±¡ç„¶å ä½¿ç”¨ reducerã€‚\n\n    æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„\n    // ğŸš© ä¸è¦åƒä¸‹é¢è¿™æ ·æ”¹å˜ä¸€ä¸ªå¯¹è±¡ï¼š\n    form.firstName = 'Taylor';\n\n    å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼š\n    // âœ… ä½¿ç”¨æ–°å¯¹è±¡æ›¿æ¢ state\n    setForm({\n      ...form,\n      firstName: 'Taylor'\n    });\n\n    ä½¿ç”¨ key é‡ç½®çŠ¶æ€ \n    åœ¨ æ¸²æŸ“åˆ—è¡¨ æ—¶ï¼Œä½ ç»å¸¸ä¼šé‡åˆ° key å±æ€§ã€‚ç„¶è€Œï¼Œå®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªç”¨é€”ã€‚\n\n    ä½ å¯ä»¥ é€šè¿‡å‘ç»„ä»¶ä¼ é€’ä¸åŒçš„ key æ¥é‡ç½®ç»„ä»¶çš„çŠ¶æ€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé‡ç½®æŒ‰é’®æ”¹å˜ version çŠ¶æ€å˜é‡ï¼Œæˆ‘ä»¬å°†å®ƒä½œä¸ºä¸€ä¸ª key ä¼ é€’ç»™ Form ç»„ä»¶ã€‚å½“ key æ”¹å˜æ—¶ï¼ŒReact ä¼šä»å¤´å¼€å§‹é‡æ–°åˆ›å»º Form ç»„ä»¶ï¼ˆä»¥åŠå®ƒçš„æ‰€æœ‰å­ç»„ä»¶ï¼‰ï¼Œæ‰€ä»¥å®ƒçš„çŠ¶æ€è¢«é‡ç½®äº†ã€‚\n\n    export default function App() {\n      const [version, setVersion] = useState(0);\n\n      function handleReset() {\n        setVersion(version + 1);\n      }\n\n      return (\n        <>\n          <button onClick={handleReset}>Reset</button>\n          <Form key={version} />\n        </>\n      );\n    }\n")])])]),e("h2",{attrs:{id:"useeffect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),e("p",[t._v("(1). Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ(ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­)")]),t._v(" "),e("p",[t._v("(2). Reactä¸­çš„å‰¯ä½œç”¨æ“ä½œ:\nÂ  Â  Â  Â  å‘ajaxè¯·æ±‚æ•°æ®è·å–\nÂ  Â  Â  Â  è®¾ç½®è®¢é˜… / å¯åŠ¨å®šæ—¶å™¨\nÂ  Â  Â  Â  æ‰‹åŠ¨æ›´æ”¹çœŸå®DOM")]),t._v(" "),e("p",[t._v("(3). è¯­æ³•å’Œè¯´æ˜:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("    1.ç©ºæ•°ç»„æ—¶ï¼Œå¯ä»¥çœ‹ä½œcomponentDidMount() \n    useEffect(() => { \nÂ  Â  Â  // åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ\nÂ  Â  }, []) \n\n    2.å†…éƒ¨å‡½æ•°çš„returnä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥çœ‹ä½œcomponentWillUnmount() \n    useEffect(() => { \nÂ  Â  Â  // åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ\nÂ  Â  Â  return () => { // åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ\nÂ  Â  Â  Â  // åœ¨æ­¤åšä¸€äº›æ”¶å°¾å·¥ä½œ, æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨/å–æ¶ˆè®¢é˜…ç­‰\nÂ  Â  Â  }\nÂ  Â  }, []) \n\n    3.æ ¹æ®stateå€¼ï¼Œå½“è¿™äº›å€¼å‘ç”Ÿæ›´æ–°æ—¶ï¼Œæ‰ä¼šæ‰§è¡ŒcomponentDidUpdate()\nÂ  Â  useEffect(() => { \nÂ  Â  Â  // åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ\nÂ  Â  }, [stateValue]) \n")])])]),e("h2",{attrs:{id:"uselayouteffect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uselayouteffect"}},[t._v("#")]),t._v(" useLayoutEffect")]),t._v(" "),e("p",[e("strong",[t._v("å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚å°½å¯èƒ½ä½¿ç”¨ useEffectã€‚")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("  ä½œç”¨ï¼šåœ¨æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•å‰è®¡ç®—å¸ƒå±€\n  æ³¨æ„ï¼š\n  1.Effect åªåœ¨å®¢æˆ·ç«¯ä¸Šè¿è¡Œï¼Œåœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ä¸ä¼šè¿è¡Œã€‚\n  2.useLayoutEffect å†…éƒ¨çš„ä»£ç å’Œæ‰€æœ‰è®¡åˆ’çš„çŠ¶æ€æ›´æ–°é˜»å¡äº†æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•ã€‚å¦‚æœè¿‡åº¦ä½¿ç”¨ï¼Œè¿™ä¼šä½¿ä½ çš„åº”ç”¨ç¨‹åºå˜æ…¢ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œå°½é‡é€‰æ‹© useEffectã€‚\n\n  å¤§å¤šæ•°ç»„ä»¶åªè¿”å›ä¸€äº› JSXï¼Œç„¶åæµè§ˆå™¨è®¡ç®—ä»–ä»¬çš„ å¸ƒå±€ï¼ˆä½ç½®å’Œå¤§å°ï¼‰å¹¶é‡æ–°ç»˜åˆ¶å±å¹•ã€‚\n  ä¸éœ€è¦ä¾é å®ƒä»¬åœ¨å±å¹•ä¸Šçš„ä½ç½®å’Œå¤§å°æ¥å†³å®šæ¸²æŸ“ä»€ä¹ˆã€‚\n\n  æœ‰æ—¶å€™ï¼Œè¿™è¿˜ä¸å¤Ÿã€‚æƒ³è±¡ä¸€ä¸‹æ‚¬åœæ—¶å‡ºç°åœ¨æŸä¸ªå…ƒç´ æ—è¾¹çš„ tooltipã€‚å¦‚æœæœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œtooltip åº”è¯¥å‡ºç°åœ¨å…ƒç´ çš„ä¸Šæ–¹ï¼Œä½†æ˜¯å¦‚æœä¸åˆé€‚ï¼Œå®ƒåº”è¯¥å‡ºç°åœ¨ä¸‹é¢ã€‚ä¸ºäº†è®© tooltip æ¸²æŸ“åœ¨æœ€ç»ˆæ­£ç¡®çš„ä½ç½®ï¼Œä½ éœ€è¦çŸ¥é“å®ƒçš„é«˜åº¦ï¼ˆå³å®ƒæ˜¯å¦é€‚åˆæ”¾åœ¨é¡¶éƒ¨ï¼‰ã€‚\n\n  è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦åˆ†ä¸¤æ­¥æ¸²æŸ“ï¼š\n\n  1.å°† tooltip æ¸²æŸ“åˆ°ä»»ä½•åœ°æ–¹ï¼ˆå³ä½¿ä½ç½®ä¸å¯¹ï¼‰ã€‚\n  2.æµ‹é‡å®ƒçš„é«˜åº¦å¹¶å†³å®šæ”¾ç½® tooltip çš„ä½ç½®ã€‚\n  3.æŠŠ tooltip æ¸²æŸ“æ”¾åœ¨æ­£ç¡®çš„ä½ç½®ã€‚\n  æ‰€æœ‰è¿™äº›éƒ½éœ€è¦åœ¨æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•ä¹‹å‰å®Œæˆã€‚ä½ ä¸å¸Œæœ›ç”¨æˆ·çœ‹åˆ° tooltip åœ¨ç§»åŠ¨ã€‚è°ƒç”¨ useLayoutEffect åœ¨æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•ä¹‹å‰æ‰§è¡Œå¸ƒå±€æµ‹é‡ï¼š\n\n  function Tooltip() {\n  const ref = useRef(null);\n  const [tooltipHeight, setTooltipHeight] = useState(0); // ä½ è¿˜ä¸çŸ¥é“çœŸæ­£çš„é«˜åº¦\n\n  useLayoutEffect(() => {\n    const { height } = ref.current.getBoundingClientRect();\n    setTooltipHeight(height); // ç°åœ¨é‡æ–°æ¸²æŸ“ï¼Œä½ çŸ¥é“äº†çœŸå®çš„é«˜åº¦\n  }, []);\n\n  // ... åœ¨ä¸‹æ–¹çš„æ¸²æŸ“é€»è¾‘ä¸­ä½¿ç”¨ tooltipHeight ...\n\n  ä¸‹é¢æ˜¯è¿™å¦‚ä½•ä¸€æ­¥æ­¥å·¥ä½œçš„ï¼š\n\n  1.Tooltip ä½¿ç”¨åˆå§‹å€¼ tooltipHeight = 0 è¿›è¡Œæ¸²æŸ“ï¼ˆå› æ­¤ tooltip å¯èƒ½è¢«é”™è¯¯åœ°æ”¾ç½®ï¼‰ã€‚\n  2.React å°†å®ƒæ”¾åœ¨ DOM ä¸­ï¼Œç„¶åè¿è¡Œ useLayoutEffect ä¸­çš„ä»£ç ã€‚\n  3.useLayoutEffect æµ‹é‡ äº† tooltip å†…å®¹çš„é«˜åº¦ï¼Œå¹¶ç«‹å³è§¦å‘é‡æ–°æ¸²æŸ“ã€‚\n  4.ä½¿ç”¨å®é™…çš„ tooltipHeight å†æ¬¡æ¸²æŸ“ Tooltipï¼ˆè¿™æ · tooltip çš„ä½ç½®å°±æ­£ç¡®äº†ï¼‰ã€‚\n  5.React åœ¨ DOM ä¸­å¯¹å®ƒè¿›è¡Œæ›´æ–°ï¼Œæµè§ˆå™¨æœ€ç»ˆæ˜¾ç¤ºå‡º tooltipã€‚\n\n\n  TooltipContainer.js\n  export default function TooltipContainer({ children, x, y, contentRef }) {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        pointerEvents: 'none',\n        left: 0,\n        top: 0,\n        transform: `translate3d(${x}px, ${y}px, 0)`\n      }}\n    >\n      <div ref={contentRef} className=\"tooltip\">\n        {children}\n      </div>\n    </div>\n  );\n}\n\nTooltip.js\nimport { useRef, useLayoutEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport TooltipContainer from './TooltipContainer.js';\n\nexport default function Tooltip({ children, targetRect }) {\n  const ref = useRef(null);\n  const [tooltipHeight, setTooltipHeight] = useState(0);\n\n  useLayoutEffect(() => {\n    const { height } = ref.current.getBoundingClientRect();\n    setTooltipHeight(height);\n    console.log('Measured tooltip height: ' + height);\n  }, []);\n\n  let tooltipX = 0;\n  let tooltipY = 0;\n  if (targetRect !== null) {\n    tooltipX = targetRect.left;\n    tooltipY = targetRect.top - tooltipHeight;\n    if (tooltipY < 0) {\n      // å®ƒä¸é€‚åˆä¸Šæ–¹ï¼Œå› æ­¤æŠŠå®ƒæ”¾åœ¨ä¸‹é¢ã€‚\n      tooltipY = targetRect.bottom;\n    }\n  }\n\n  return createPortal(\n    <TooltipContainer x={tooltipX} y={tooltipY} contentRef={ref}>\n      {children}\n    </TooltipContainer>,\n    document.body\n  );\n}\n\nButtonWithTooltip.js\nimport { useState, useRef } from 'react';\nimport Tooltip from './Tooltip.js';\n\nexport default function ButtonWithTooltip({ tooltipContent, ...rest }) {\n  const [targetRect, setTargetRect] = useState(null);\n  const buttonRef = useRef(null);\n  return (\n    <>\n      <button\n        {...rest}\n        ref={buttonRef}\n        onPointerEnter={() => {\n          const rect = buttonRef.current.getBoundingClientRect();\n          setTargetRect({\n            left: rect.left,\n            top: rect.top,\n            right: rect.right,\n            bottom: rect.bottom,\n          });\n        }}\n        onPointerLeave={() => {\n          setTargetRect(null);\n        }}\n      />\n      {targetRect !== null && (\n        <Tooltip targetRect={targetRect}>\n          {tooltipContent}\n        </Tooltip>\n      )\n    }\n    </>\n  );\n}\n\nApp.js\nimport ButtonWithTooltip from './ButtonWithTooltip.js';\n\nexport default function App() {\n  return (\n    <div>\n      <ButtonWithTooltip\n        tooltipContent={\n          <div>\n            This tooltip does not fit above the button.\n            <br />\n            This is why it's displayed below instead!\n          </div>\n        }\n      >\n        Hover over me (tooltip above)\n      </ButtonWithTooltip>\n      <div style={{ height: 50 }} />\n      <ButtonWithTooltip\n        tooltipContent={\n          <div>This tooltip fits above the button</div>\n        }\n      >\n        Hover over me (tooltip below)\n      </ButtonWithTooltip>\n      <div style={{ height: 50 }} />\n      <ButtonWithTooltip\n        tooltipContent={\n          <div>This tooltip fits above the button</div>\n        }\n      >\n        Hover over me (tooltip below)\n      </ButtonWithTooltip>\n    </div>\n  );\n}\n\n\n\n}\n")])])]),e("h2",{attrs:{id:"useref"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[t._v("#")]),t._v(" useRef")]),t._v(" "),e("p",[t._v("å®ƒèƒ½è®©ä½ å¼•ç”¨ä¸€ä¸ªä¸éœ€è¦æ¸²æŸ“çš„å€¼ã€‚")]),t._v(" "),e("p",[t._v("ç»„ä»¶æ›´æ–°ï¼Œrefä¿æŒå‰å€¼")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ä½œç”¨ï¼š\nè·å–domèŠ‚ç‚¹ï¼Œä»£æ›¿id\næ¸…ç†è®¡æ—¶å™¨\n\n(1). Ref Hookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨/æŸ¥æ‰¾ç»„ä»¶å†…çš„æ ‡ç­¾æˆ–ä»»æ„å…¶å®ƒæ•°æ®\n(2). è¯­æ³•: const refContainer = useRef()\n(3). ä½œç”¨:ä¿å­˜æ ‡ç­¾å¯¹è±¡,åŠŸèƒ½ä¸React.createRef()ä¸€æ ·\n(4). ç±»å¼ç»„ä»¶å¯ä»¥çœ‹ä½œDOMèŠ‚ç‚¹å¯ä»¥ç›´æ¥ç”¨ref  å‡½æ•°å¼ä¸è¡Œ\n\nç»™inputåŠ äº‹ä»¶ï¼Œæƒ³è¦inputçš„æ•°æ®ï¼Œæ­¤æ—¶å¯ä»¥ä¸ç”¨refï¼Œç›´æ¥é€šè¿‡eventå¯¹è±¡\n\næ³¨æ„äº‹é¡¹ \nä½ å¯ä»¥ä¿®æ”¹ ref.current å±æ€§ã€‚ä¸ state ä¸åŒï¼Œå®ƒæ˜¯å¯å˜çš„ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒæŒæœ‰ä¸€ä¸ªç”¨äºæ¸²æŸ“çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œä½ çš„ state çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé‚£ä¹ˆä½ å°±ä¸åº”è¯¥ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ã€‚\nå½“ä½ æ”¹å˜ ref.current å±æ€§æ—¶ï¼ŒReact ä¸ä¼šé‡æ–°æ¸²æŸ“ä½ çš„ç»„ä»¶ã€‚React ä¸çŸ¥é“ä½ ä½•æ—¶æ”¹å˜å®ƒï¼Œå› ä¸º ref æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚\né™¤äº† åˆå§‹åŒ– å¤–ä¸è¦åœ¨æ¸²æŸ“æœŸé—´å†™å…¥ æˆ–è€…è¯»å– ref.currentã€‚è¿™ä¼šä½¿ä½ çš„ç»„ä»¶çš„è¡Œä¸ºä¸å¯é¢„æµ‹ã€‚\n\nå¦‚ä½•é¿å…åœ¨åˆå§‹åŒ– useRef ä¹‹åè¿›è¡Œ null çš„ç±»å‹æ£€æŸ¥\n\nfunction Video() {\n  const playerRef = useRef(null);\n\n  function getPlayer() {\n    if (playerRef.current !== null) {\n      return playerRef.current;\n    }\n    const player = new VideoPlayer();\n    playerRef.current = player;\n    return player;\n  }\n  }\n\n\n")])])]),e("p",[t._v("ä¼ é€’ ref åˆ°ä½ è‡ªå·±çš„ç»„ä»¶")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const inputRef = useRef(null);\nreturn <MyInput ref={inputRef} />;\n\n1. æ‰¾åˆ°ä½ æƒ³è·å¾— ref çš„ç»„ä»¶ å°†å…¶åŒ…è£…åœ¨ forwardRef é‡Œ\nimport { forwardRef } from 'react';\n\nconst MyInput = forwardRef(({ value, onChange }, ref) => {\n  return (\n    <input\n      value={value}\n      onChange={onChange}\n      ref={ref}\n    />\n  );\n});\n\nexport default MyInput;\n\n")])])]),e("h2",{attrs:{id:"usememo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usememo"}},[t._v("#")]),t._v(" useMemo")]),t._v(" "),e("p",[t._v("å®ƒåœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™èƒ½å¤Ÿç¼“å­˜è®¡ç®—çš„ç»“æœ")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const cachedValue = useMemo(calculateValue, dependencies)\ncalculateValue è¦ç¼“å­˜è®¡ç®—å€¼çš„å‡½æ•°\nReact å°†ä¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶è°ƒç”¨è¯¥å‡½æ•°ï¼›åœ¨ä¹‹åçš„æ¸²æŸ“ä¸­ï¼Œå¦‚æœ dependencies æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒReact å°†ç›´æ¥è¿”å›ç›¸åŒå€¼\n\ndependencies å“åº”å¼å˜é‡åŒ…æ‹¬ propsã€state å’Œæ‰€æœ‰ä½ ç›´æ¥åœ¨ç»„ä»¶ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°\n")])])]),e("p",[t._v("ç”¨æ³• :è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("å¦‚ä½•è¡¡é‡è®¡ç®—è¿‡ç¨‹çš„å¼€é”€æ˜¯å¦æ˜‚è´µï¼Ÿ \nä¸€èˆ¬æ¥è¯´ï¼Œé™¤éè¦åˆ›å»ºæˆ–å¾ªç¯éå†æ•°åƒä¸ªå¯¹è±¡ï¼Œå¦åˆ™å¼€é”€å¯èƒ½å¹¶ä¸å¤§ã€‚å¦‚æœä½ æƒ³è·å¾—æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°æ¥æµ‹é‡èŠ±è´¹è¿™ä¸Šé¢çš„æ—¶é—´ï¼š\nconsole.time('filter array');\nconst visibleTodos = filterTodos(todos, tab);\nconsole.timeEnd('filter array');\nå¦‚æœå…¨éƒ¨è®°å½•çš„æ—¶é—´åŠ èµ·æ¥å¾ˆé•¿ï¼ˆ1ms æˆ–è€…æ›´å¤šï¼‰ï¼Œé‚£ä¹ˆè®°å¿†æ­¤è®¡ç®—ç»“æœæ˜¯æœ‰æ„ä¹‰çš„\nä½ çš„å¼€å‘è®¾å¤‡å¯èƒ½æ¯”ç”¨æˆ·çš„è®¾å¤‡æ€§èƒ½æ›´å¼ºå¤§ï¼Œå› æ­¤æœ€å¥½äººä¸ºé™ä½å½“å‰æµè§ˆå™¨æ€§èƒ½æ¥æµ‹è¯•\n\n\n\n")])])]),e("p",[t._v("ä½•æ—¶ä½¿ç”¨")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("å¦‚æœä½ çš„åº”ç”¨ç¨‹åºç±»ä¼¼äºæ­¤ç«™ç‚¹ï¼Œå¹¶ä¸”å¤§å¤šæ•°äº¤äº’éƒ½å¾ˆç²—ç³™ï¼ˆä¾‹å¦‚æ›¿æ¢é¡µé¢æˆ–æ•´ä¸ªç« èŠ‚ï¼‰ï¼Œåˆ™é€šå¸¸ä¸éœ€è¦ä½¿ç”¨è®°å¿†åŒ–ã€‚åä¹‹ï¼Œå¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ›´åƒæ˜¯ç»˜å›¾ç¼–è¾‘å™¨ï¼Œå¹¶ä¸”å¤§å¤šæ•°äº¤äº’éƒ½æ˜¯é¢—ç²’çŠ¶çš„ï¼ˆå¦‚ç§»åŠ¨å½¢çŠ¶ï¼‰ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šå‘ç°è®°å¿†åŒ–éå¸¸æœ‰ç”¨ã€‚\n\nä¸€äº›å›¢é˜Ÿé€‰æ‹©ä¸è€ƒè™‘å…·ä½“æƒ…å†µï¼Œå°½å¯èƒ½å¤šåœ°ä½¿ç”¨ useMemoã€‚ä¸è¿‡è¿™ç§åšæ³•ä¼šé™ä½ä»£ç å¯è¯»æ€§ã€‚æ­¤å¤–ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ useMemo çš„ä½¿ç”¨éƒ½æ˜¯æœ‰æ•ˆçš„ï¼šä¸€ä¸ªâ€œæ°¸è¿œæ˜¯æ–°çš„â€çš„å•ä¸€å€¼å°±è¶³ä»¥ç ´åæ•´ä¸ªç»„ä»¶çš„è®°å¿†åŒ–æ•ˆæœ\n\n\nåœ¨å®è·µä¸­ï¼Œä½ å¯ä»¥é€šè¿‡éµå¾ªä¸€äº›åŸåˆ™æ¥é¿å… useMemo çš„æ»¥ç”¨ï¼š\n\n1.å½“ä¸€ä¸ªç»„ä»¶åœ¨è§†è§‰ä¸ŠåŒ…è£¹å…¶ä»–ç»„ä»¶æ—¶ï¼Œè®©å®ƒ å°† JSX ä½œä¸ºå­ç»„ä»¶ä¼ é€’ã€‚è¿™æ ·ï¼Œå½“åŒ…è£…å™¨ç»„ä»¶æ›´æ–°è‡ªå·±çš„ state æ—¶ï¼ŒReact çŸ¥é“å®ƒçš„å­ç»„ä»¶ä¸éœ€è¦é‡æ–°æ¸²æŸ“ã€‚\n2.é¦–é€‰æœ¬åœ° stateï¼Œéå¿…è¦ä¸è¿›è¡Œ çŠ¶æ€æå‡ã€‚ä¾‹å¦‚ï¼Œä¸è¦ä¿æŒåƒè¡¨å•ã€ç»„ä»¶æ˜¯å¦æ‚¬åœåœ¨ç»„ä»¶æ ‘é¡¶éƒ¨è¿™æ ·çš„ç¬æ—¶çŠ¶æ€ã€‚\n3.ä¿æŒä½ çš„ æ¸²æŸ“é€»è¾‘çº¯ç²¹ã€‚å¦‚æœé‡æ–°æ¸²æŸ“ç»„ä»¶ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜æˆ–äº§ç”Ÿä¸€äº›æ˜æ˜¾çš„è§†è§‰é”™è¯¯ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç»„ä»¶ä¸­çš„é”™è¯¯ï¼ä¿®å¤é”™è¯¯è€Œä¸æ˜¯ä½¿ç”¨è®°å¿†åŒ–ã€‚\n4.é¿å… ä¸å¿…è¦åœ°æ›´æ–° state çš„ Effectã€‚React åº”ç”¨ç¨‹åºä¸­çš„å¤§å¤šæ•°æ€§èƒ½é—®é¢˜éƒ½æ˜¯ç”± Effect åˆ›é€ çš„æ›´æ–°é“¾å¼•èµ·çš„ï¼Œè¿™äº›æ›´æ–°é“¾å¯¼è‡´ç»„ä»¶åå¤é‡æ–°æ¸²æŸ“ã€‚\n5.å°½åŠ› ä» Effect ä¸­ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹ã€‚ä¾‹å¦‚, ç›¸æ¯”äºè®°å¿†åŒ–ï¼Œåœ¨ Effect å†…éƒ¨æˆ–ç»„ä»¶å¤–éƒ¨ç§»åŠ¨æŸäº›å¯¹è±¡æˆ–å‡½æ•°é€šå¸¸æ›´ç®€å•ã€‚\n\nå¦‚æœæŸä¸ªç‰¹å®šçš„äº¤äº’ä»ç„¶æ„Ÿè§‰æ»åï¼Œä½¿ç”¨ React å¼€å‘è€…å·¥å…·åˆ†æå™¨ æŸ¥çœ‹å“ªäº›ç»„ä»¶å°†ä»è®°å¿†åŒ–ä¸­è·ç›Šæœ€å¤šï¼Œå¹¶åœ¨éœ€è¦çš„åœ°æ–¹æ·»åŠ è®°å¿†åŒ–ã€‚è¿™äº›åŸåˆ™ä½¿ä½ çš„ç»„ä»¶æ›´æ˜“äºè°ƒè¯•å’Œç†è§£ï¼Œå› æ­¤åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½åº”è¯¥éµå¾ªå®ƒä»¬ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œæˆ‘ä»¬æ­£åœ¨ç ”ç©¶ è‡ªåŠ¨è¿›è¡Œç²’åº¦è®°å¿† ä»¥ä¸€åŠ³æ°¸é€¸åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n\nå¯ä»¥å°† <List /> JSX èŠ‚ç‚¹æœ¬èº«åŒ…è£¹åœ¨ useMemo ä¸­ï¼Œè€Œä¸æ˜¯å°† List åŒ…è£¹åœ¨ memo ä¸­ï¼š\nexport default function TodoList({ todos, tab, theme }) {\n  const visibleTodos = useMemo(() => filterTodos(todos, tab), [todos, tab]);\n  const children = useMemo(() => <List items={visibleTodos} />, [visibleTodos]);\n  return (\n    <div className={theme}>\n      {children}\n    </div>\n  );\n}\n")])])]),e("h2",{attrs:{id:"usecallback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usecallback"}},[t._v("#")]),t._v(" useCallback")]),t._v(" "),e("p",[t._v("ç›®çš„ï¼š"),e("strong",[t._v("é¿å…æ— æ•ˆæ›´æ–°")]),t._v("ï¼›é€šå¸¸è€Œè¨€ï¼Œå¦‚æœçˆ¶ç»„ä»¶æ›´æ–°äº†ï¼Œå­ç»„ä»¶ä¹Ÿä¼šæ‰§è¡Œæ›´æ–°ï¼›ä½†æ˜¯å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæ›´æ–°æ˜¯æ²¡æœ‰å¿…è¦çš„")]),t._v(" "),e("p",[t._v("ä½¿ç”¨\nå½“çˆ¶ç»™å­ä¼ å‡½æ•°æ—¶\næ­é…useMemo")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Â  const addItem = useCallback((value)=>{\nÂ  },[]) //[]é‡Œå­˜æ”¾ï¼Œå½“å“ªäº›æ•°æ®æ›´æ–°æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿæ›´æ–°\n")])])]),e("h2",{attrs:{id:"usehistory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usehistory"}},[t._v("#")]),t._v(" useHistory")]),t._v(" "),e("p",[t._v("æ³¨æ„ï¼šuseNavigateä»£æ›¿äº†useHistory")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import { useLocation } from \"react-router-dom\";\nlet location = useLocation();\nconst path = location.pathname\n\n// v5\nimport { useHistory } from 'react-router-dom';\n\nfunction MyButton() {\n  let history = useHistory();\n  function handleClick() {\n    history.push('/home');\n  };\n  return <button onClick={handleClick}>Submit</button>;\n};\n\n// v6\nimport { useNavigate } from 'react-router-dom';\n\nfunction MyButton() {\n  let navigate = useNavigate();\n  function handleClick() {\n    navigate('/home');\n  };\n  return <button onClick={handleClick}>Submit</button>;\n};\nhistoryçš„ç”¨æ³•ä¹Ÿå°†è¢«æ›¿æ¢æˆï¼š\n\n// v5\nhistory.push('/home');\nhistory.replace('/home');\n\n// v6\nnavigate('/home');\nnavigate('/home', {replace: true});\n\n//å¾—åˆ°å½“å‰çš„è·¯å¾„\nlet location = useLocation();\nlet path = location.pathname\n\nJSè·¯ç”±è·³è½¬ useNavigate ä»£æ›¿ useHistory\nimport { useNavigate } from 'react-router-dom';\nlet navigate = useNavigate();\n// è·³è½¬åˆ°åå°ï¼Œä¸éœ€è¦å›é€€\n\tÂ navigate('/',{replace: trueï¼Œstate })\nnavigate(-1) //å›é€€ \n\nå–state\nÂ  Â  const location = useLocation();\n\tä¼ è¿‡æ¥çš„æ—¶å€™ state={product} ä½†æ˜¯è§£æ„ä¸å‡ºæ¥ ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡\nÂ  Â  const product = location.state\n \n")])])]),e("h2",{attrs:{id:"react-router-v6-æ–°ç‰¹æ€§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-router-v6-æ–°ç‰¹æ€§"}},[t._v("#")]),t._v(" React-Router v6 æ–°ç‰¹æ€§")]),t._v(" "),e("p",[t._v("https://juejin.cn/post/7033313711947251743")]),t._v(" "),e("h2",{attrs:{id:"è·¯ç”±"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è·¯ç”±"}},[t._v("#")]),t._v(" è·¯ç”±")]),t._v(" "),e("p",[t._v("useReducer-useContext\nåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒuseReducerÂ ä¼šæ¯”Â useStateÂ æ›´é€‚ç”¨ï¼Œä¾‹å¦‚ state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state ç­‰ã€‚å¹¶ä¸”ï¼Œä½¿ç”¨Â useReducerÂ è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸ºä½ å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’Â dispatchÂ è€Œä¸æ˜¯å›è°ƒå‡½æ•°")]),t._v(" "),e("p",[t._v("æ¥è‡ª "),e("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#usereducer",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zh-hans.reactjs.org/docs/hooks-reference.html#usereducer"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("const [state, dispatch] = useReducer(reducer, initialArg, init);")]),t._v(" "),e("p",[t._v("æ¥è‡ª "),e("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#usereducer",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zh-hans.reactjs.org/docs/hooks-reference.html#usereducer"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"reactå®ç°æ‹–æ‹½"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reactå®ç°æ‹–æ‹½"}},[t._v("#")]),t._v(" reactå®ç°æ‹–æ‹½")]),t._v(" "),e("p",[t._v("npm install react-dnd react-dnd-html5-backend")]),t._v(" "),e("p",[t._v("https://react-dnd.github.io/react-dnd/about")])])}),[],!1,null,null,null);e.default=a.exports}}]);